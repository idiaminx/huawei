function main(){var n=new window.CastPlayer;n.getQueryStringParams("action")=="c"&&n.launchApp()}(function(){"use strict";function e(){document.getElementById("playerstate").innerHTML='<span>VLC not started or not configured :<\/span>&nbsp;&nbsp;<a target="_blank" href="http://www.howtogeek.com/117261/how-to-activate-vlcs-web-interface-control-vlc-from-a-browser-use-any-smartphone-as-a-remote/" id="aide">Help<\/a>'}function o(){document.getElementById("playerstate").innerHTML="Video started on VLC"}var i=300,r={IDLE:0,ACTIVE:1,WARNING:2,ERROR:3},t={IDLE:"IDLE",LOADING:"LOADING",LOADED:"LOADED",PLAYING:"PLAYING",PAUSED:"PAUSED",STOPPED:"STOPPED",SEEKING:"SEEKING",ERROR:"ERROR",BUFFERING:"BUFFERING"},n=function(){this.bgPage=chrome.extension.getBackgroundPage();this.store=this.bgPage.helper.loadStore();this.deviceState=r.IDLE;this.receivers_available=!1;this.currentMediaSession=null;this.currentVolume=1;this.autoplay=!0;this.session=null;this.castPlayerState=t.IDLE;this.localPlayerState=t.IDLE;this.localPlayer=null;this.fullscreen=!1;this.audio=!0;this.currentMediaTime=0;this.currentMediaDuration=-1;this.timer=null;this.progressFlag=!0;this.timerStep=1e3;this.mediaContents=this.store.videos.list;this.mediaContents.length<1?this.store.mediaPlay=-1:this.currentMediaIndex>=this.mediaContents.length&&(this.store.mediaPlay=this.mediaContents[this.mediaContents.length-1].id);this.currentMediaIndex=this.store.mediaPlay;this.initializeCastPlayer();this.initializeLocalPlayer();this.addVideoThumbs();this.initializeUI()},u,f;n.prototype.initializeLocalPlayer=function(){this.localPlayer=document.getElementById("video_element");this.localPlayer.addEventListener("error",this.onErrorLocalPlayer.bind(this))};n.prototype.onErrorLocalPlayer=function(){var n=this.getVideo(this.currentMediaIndex);if(n!=null){if(this.localPlayer.src!=n.url){this.playMediaLocally(0,!0);return}this.errorHtml("Media error :"+n.title);this.updateProgressBar(!1)}};n.prototype.initializeCastPlayer=function(){if(!chrome.cast||!chrome.cast.isAvailable){setTimeout(this.initializeCastPlayer.bind(this),1e3);return}var n=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,t=new chrome.cast.SessionRequest("8C3751F2"),i=new chrome.cast.ApiConfig(t,this.sessionListener.bind(this),this.receiverListener.bind(this),n);chrome.cast.initialize(i,this.onInitSuccess.bind(this),this.onError.bind(this))};n.prototype.onInitSuccess=function(){this.updateMediaControlUI()};n.prototype.onError=function(){};n.prototype.getVideo=function(n){return this.store.videos.get(n)};n.prototype.mediaTitleUpdate=function(){var n=this.getVideo(this.currentMediaIndex);n!=null&&(document.getElementById("media_title").innerHTML=n.title,document.getElementById("media_title").style.backgroundColor="transparent")};n.prototype.sessionListener=function(n){if(this.session=n,this.session){if(this.deviceState=r.ACTIVE,this.session.media[0]){this.onMediaDiscovered("activeSession",this.session.media[0]);this.syncCurrentMedia(this.session.media[0].media.contentId);this.mediaTitleUpdate();this.updateDisplayMessage()}else this.loadMedia(this.currentMediaIndex);this.updateMediaControlUI();this.session.addUpdateListener(this.sessionUpdateListener.bind(this))}};n.prototype.startWith=function(n,t){return n.lastIndexOf(t,0)===0};n.prototype.syncCurrentMedia=function(n){for(var t=0;t<this.mediaContents.length;t++)this.startWith(this.mediaContents[t].url+"",n+"")&&(this.currentMediaIndex=this.mediaContents[t].id)};n.prototype.receiverListener=function(n){n==="available"&&(this.receivers_available=!0,this.updateMediaControlUI())};n.prototype.sessionUpdateListener=function(n){if(!n){this.session=null;this.deviceState=r.IDLE;this.castPlayerState=t.IDLE;this.currentMediaSession=null;clearInterval(this.timer);this.updateDisplayMessage();var i=navigator.onLine;i==!0&&this.updateMediaControlUI()}};n.prototype.selectMedia=function(n){if(!this.elemIsEdit(n)){this.updateProgressBar(!1);this.mediaTitleUpdate();this.store.mediaPlay=this.currentMediaIndex=n;var u=document.getElementById("progress_indicator"),f=document.getElementById("progress");this.currentMediaTime=0;f.style.width="0px";u.style.marginLeft=-4-i+"px";this.currentMediaSession||this.deviceState==r.ACTIVE?(this.castPlayerState=t.IDLE,this.playMedia()):(this.localPlayerState=t.IDLE,this.playMediaLocally(0));this.selectMediaUpdateUI()}};u=0;n.prototype.launchApp=function(){if(this.stopMediaLocally(),u<10){if(!chrome.cast||!chrome.cast.isAvailable){u++;setTimeout(this.launchApp.bind(this),1e3);return}this.localPlayer.style.display="none";$("#loader").hide();chrome.cast.requestSession(this.sessionListener.bind(this),this.onLaunchError.bind(this));u=0}this.timer&&clearInterval(this.timer)};n.prototype.onRequestSessionSuccess=function(n){this.session=n;this.deviceState=r.ACTIVE;this.updateMediaControlUI();this.loadMedia(this.currentMediaIndex);this.session.addUpdateListener(this.sessionUpdateListener.bind(this))};n.prototype.onLaunchError=function(){this.deviceState=r.ERROR};n.prototype.stopApp=function(){this.session.stop(this.onStopAppSuccess.bind(this,"Session stopped"),this.onError.bind(this))};n.prototype.onStopAppSuccess=function(){this.deviceState=r.IDLE;this.castPlayerState=t.IDLE;this.currentMediaSession=null;clearInterval(this.timer);this.updateDisplayMessage();this.updateMediaControlUI()};n.prototype.loadBackgroundCast=function(){var i,n,t;this.session!=null&&(i="http://auriou.files.wordpress.com/2014/09/videocast-wallpaper1.jpg",n=new chrome.cast.media.MediaInfo(i),n.metadata=new chrome.cast.media.PhotoMediaMetadata,n.metadata.metadataType=chrome.cast.media.MetadataType.PHOTO,n.contentType="image/jpg",t=new chrome.cast.media.LoadRequest(n),t.autoplay=!0,t.currentTime=0,this.session.loadMedia(t,this.onBackgroundDiscovered.bind(this),this.onBackgroundError.bind(this)))};n.prototype.onBackgroundDiscovered=function(){};n.prototype.onBackgroundError=function(){};n.prototype.loadMedia=function(n,i){var r=this.getVideo(this.currentMediaIndex),e,u,f;if(r!=null){if(!this.session)return;if(r.type!="mp4"&&r.type!="webm"){this.errorHtml("Error : "+r.type+" icompatible with cast");return}e=this.store.getUrlMedia(r.id,i);u=new chrome.cast.media.MediaInfo(e);u.metadata=new chrome.cast.media.GenericMediaMetadata;u.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC;u.contentType="video/"+r.type;u.metadata.title=r.title;f=new chrome.cast.media.LoadRequest(u);f.autoplay=this.autoplay;this.localPlayerState==t.PLAYING?(f.currentTime=this.localPlayer.currentTime,this.localPlayer.pause(),this.localPlayerState=t.STOPPED):f.currentTime=0;this.castPlayerState=t.LOADING;this.session.loadMedia(f,this.onMediaDiscovered.bind(this,"loadMedia"),this.onLoadMediaError.bind(this,i));this.mediaTitleUpdate()}};f=1;n.prototype.loadTrack=function(){var t=new chrome.cast.media.TextTrackStyle,n=new chrome.cast.media.EditTracksInfoRequest([1]);this.currentMediaSession.editTracksInfo(n,this.successTrack,this.errorTrack);f++;f>=4&&(f=1)};n.prototype.errorTrack=function(){};n.prototype.successTrack=function(){};n.prototype.onMediaDiscovered=function(n,i){this.currentMediaSession=i;n=="loadMedia"&&(this.castPlayerState=this.autoplay?t.PLAYING:t.LOADED);n=="activeSession"&&(this.castPlayerState=this.session.media[0].playerState,this.currentMediaTime=this.session.media[0].currentTime);this.castPlayerState==t.PLAYING&&this.startProgressTimer(this.incrementMediaTime);this.currentMediaSession.addUpdateListener(this.onMediaStatusUpdate.bind(this));this.currentMediaDuration=this.currentMediaSession.media.duration;var r=this.formatDuration(this.currentMediaDuration);document.getElementById("duration").innerHTML=r;this.localPlayerState==t.PLAYING&&(this.localPlayer.style.display="none",$("#loader").hide(),this.resize(),this.startProgressTimer(this.incrementMediaTime));this.updateMediaControlUI();this.updateDisplayMessage()};n.prototype.padLeft=function(n){return n>9?n:"0"+n};n.prototype.formatDuration=function(n){var t,i,r;return n==undefined?"00:00:00":(t=parseInt(n/3600),n-=t*3600,i=parseInt(n/60),r=parseInt(n%60),this.padLeft(t)+":"+this.padLeft(i)+":"+this.padLeft(r))};n.prototype.onLoadMediaError=function(n,i){if(n!==!0){this.loadMedia(this.currentMediaIndex,!0);return}var r=(i!=undefined&&i!=null?i.description!=null?i.description:i.code:"Media error")+":";this.errorHtml(r+document.getElementById("media_title").innerHTML);this.castPlayerState=t.IDLE;this.updateMediaControlUI();this.updateDisplayMessage()};n.prototype.onMediaStatusUpdate=function(n){n==!1&&(this.currentMediaTime=0,this.castPlayerState=t.IDLE);this.updateProgressBar(n);this.updateDisplayMessage();this.updateMediaControlUI()};n.prototype.incrementMediaTime=function(){(this.castPlayerState==t.PLAYING||this.localPlayerState==t.PLAYING)&&(this.currentMediaTime<this.currentMediaDuration?(this.currentMediaTime+=1,this.updateProgressBarByTimer()):(this.currentMediaTime=0,clearInterval(this.timer)))};n.prototype.errorHtml=function(n){document.getElementById("media_title").innerHTML=n;document.getElementById("media_title").title=n;document.getElementById("media_title").style.backgroundColor="red";this.localPlayer.style.display="none";$("#loader").hide()};n.prototype.playMediaLocally=function(n,i){var r=this.getVideo(this.currentMediaIndex);if(r!=null){if(r.type=="flv"){this.errorHtml("Error : "+r.type+" icompatible with html5 player");return}$("#video_element").hide();$("#loader").show();this.resize();this.mediaTitleUpdate();this.localPlayer.src=this.store.getUrlMedia(r.id,i);this.localPlayerState!=t.PLAYING&&this.localPlayerState!=t.PAUSED?(this.localPlayer.load(),this.localPlayer.addEventListener("loadeddata",this.onMediaLoadedLocally.bind(this,n))):(this.localPlayer.play(),this.startProgressTimer(this.incrementMediaTime));this.localPlayerState=t.PLAYING;this.updateMediaControlUI()}};n.prototype.onMediaLoadedLocally=function(n){$("#loader").hide();this.localPlayer.style.display="block";this.currentMediaDuration=this.localPlayer.duration;var t=this.currentMediaDuration,i=parseInt(t/3600);t-=i*3600;t=this.formatDuration(t);document.getElementById("duration").innerHTML=t;this.localPlayer.currentTime=n;this.localPlayer.play();this.startProgressTimer(this.incrementMediaTime)};n.prototype.playMedia=function(){var n=this.getVideo(this.currentMediaIndex);if(n!=null){if(this.currentMediaSession)switch(this.castPlayerState){case t.LOADED:case t.PAUSED:this.currentMediaSession.play(null,this.mediaCommandSuccessCallback.bind(this,"playing started for "+this.currentMediaSession.sessionId),this.onError.bind(this));this.currentMediaSession.addUpdateListener(this.onMediaStatusUpdate.bind(this));this.castPlayerState=t.PLAYING;this.startProgressTimer(this.incrementMediaTime);break;case t.IDLE:case t.LOADING:case t.STOPPED:this.loadMedia(this.currentMediaIndex);this.currentMediaSession.addUpdateListener(this.onMediaStatusUpdate.bind(this));this.castPlayerState=t.PLAYING}else{this.deviceState==r.ACTIVE?(this.loadMedia(this.currentMediaIndex),this.castPlayerState=t.PLAYING,this.updateMediaControlUI(),this.updateDisplayMessage()):this.currentMediaTime>0?(this.localPlayer.play(),this.localPlayerState=t.PLAYING,this.updateMediaControlUI()):this.playMediaLocally(0);return}this.updateMediaControlUI();this.updateDisplayMessage()}};n.prototype.pauseMedia=function(){if(!this.currentMediaSession){this.pauseMediaLocally();return}this.castPlayerState==t.PLAYING&&(this.castPlayerState=t.PAUSED,this.currentMediaSession.pause(null,this.mediaCommandSuccessCallback.bind(this,"paused "+this.currentMediaSession.sessionId),this.onError.bind(this)),this.updateMediaControlUI(),this.updateDisplayMessage(),clearInterval(this.timer))};n.prototype.pauseMediaLocally=function(){this.localPlayer.pause();this.localPlayerState=t.PAUSED;this.updateMediaControlUI();clearInterval(this.timer)};n.prototype.stopMedia=function(){if(!this.currentMediaSession){this.stopMediaLocally();return}this.castPlayerState=t.STOPPED;this.currentMediaSession.stop(null,this.mediaCommandSuccessCallback.bind(this,"stopped "+this.currentMediaSession.sessionId),this.onError.bind(this));clearInterval(this.timer);this.updateDisplayMessage();this.updateMediaControlUI()};n.prototype.stopMediaLocally=function(){this.currentMediaTime=0;this.updateProgressBar(!1);this.localPlayer.style.display="none";$("#loader").hide();this.localPlayer.stop!=undefined?this.localPlayer.stop():this.localPlayer.pause();this.localPlayerState=t.STOPPED;this.updateMediaControlUI();this.resize()};n.prototype.setReceiverVolume=function(n){n?this.session.setReceiverMuted(!0,this.mediaCommandSuccessCallback.bind(this),this.onError.bind(this)):this.session.setReceiverVolumeLevel(this.currentVolume,this.mediaCommandSuccessCallback.bind(this),this.onError.bind(this));this.updateMediaControlUI()};n.prototype.muteMedia=function(){this.audio==!0?(this.audio=!1,document.getElementById("audio_on").style.display="none",document.getElementById("audio_off").style.display="block",this.currentMediaSession?this.setReceiverVolume(!0):this.localPlayer.muted=!0):(this.audio=!0,document.getElementById("audio_on").style.display="block",document.getElementById("audio_off").style.display="none",this.currentMediaSession?this.setReceiverVolume(!1):this.localPlayer.muted=!1);this.updateMediaControlUI()};n.prototype.seekMedia=function(n){var r=parseInt(n.offsetX),e=document.getElementById("progress_indicator"),o=document.getElementById("progress"),f;if(n.currentTarget.id=="progress_indicator")var u=parseInt(this.currentMediaTime+this.currentMediaDuration*r/i),s=parseInt(e.style.marginLeft)+r,h=parseInt(o.style.width)+r;else var u=parseInt(r*this.currentMediaDuration/i),s=r-4-i,h=r;if(this.localPlayerState!=t.IDLE)try{this.localPlayer.currentTime!=undefined&&(this.localPlayer.currentTime=u)}catch(c){}(this.currentMediaTime=u,this.localPlayerState==t.PLAYING?this.localPlayer.play():this.localPlayerState==t.PAUSED&&(document.getElementById("duration_past").innerHTML=this.formatDuration(this.currentMediaTime)),(this.localPlayerState==t.PLAYING||this.localPlayerState==t.PAUSED||this.castPlayerState==t.PLAYING||this.castPlayerState==t.PAUSED)&&(o.style.width=h+"px",e.style.marginLeft=s+"px"),this.castPlayerState==t.PLAYING||this.castPlayerState==t.PAUSED)&&(this.currentMediaTime=u,f=new chrome.cast.media.SeekRequest,f.currentTime=this.currentMediaTime,this.currentMediaSession.seek(f,this.onSeekSuccess.bind(this,"media seek done"),this.onError.bind(this)),this.castPlayerState=t.SEEKING,this.updateDisplayMessage(),this.updateMediaControlUI())};n.prototype.onSeekSuccess=function(){this.castPlayerState=this.currentMediaSession.playerState!=t.BUFFERING?this.currentMediaSession.playerState:t.PLAYING;this.updateDisplayMessage();this.updateMediaControlUI()};n.prototype.mediaCommandSuccessCallback=function(){};n.prototype.updateProgressBar=function(n){var r=document.getElementById("progress"),u=document.getElementById("progress_indicator"),f;n==!1?(r.style.width="0px",u.style.marginLeft=-4-i+"px",clearInterval(this.timer),this.castPlayerState=t.STOPPED,this.updateDisplayMessage(),document.getElementById("duration_past").innerHTML=this.formatDuration(this.currentMediaTime)):(r.style.width=Math.ceil(i*this.currentMediaSession.currentTime/this.currentMediaSession.media.duration+1)+"px",this.progressFlag=!1,setTimeout(this.setProgressFlag.bind(this),1e3),f=Math.ceil(i*this.currentMediaSession.currentTime/this.currentMediaSession.media.duration),u.style.marginLeft=-4-i+f+"px")};n.prototype.setProgressFlag=function(){this.progressFlag=!0};n.prototype.updateProgressBarByTimer=function(){var u=document.getElementById("progress"),n,f;isNaN(parseInt(u.style.width))&&(u.style.width=0);this.currentMediaDuration>0&&(n=Math.floor(i*this.currentMediaTime/this.currentMediaDuration));this.progressFlag&&(n<=i&&(u.style.width=n+"px",f=document.getElementById("progress_indicator"),f.style.marginLeft=-4-i+n+"px"),document.getElementById("duration_past").innerHTML=this.formatDuration(this.currentMediaTime));n>i&&(clearInterval(this.timer),this.deviceState=r.IDLE,this.castPlayerState=t.IDLE,this.updateDisplayMessage(),this.updateMediaControlUI())};n.prototype.updateDisplayMessage=function(){this.castPlayerState!=t.SEEKING&&(this.deviceState!=r.ACTIVE||this.castPlayerState==t.IDLE||this.castPlayerState==t.STOPPED?document.getElementById("play").style.display="block":document.getElementById("playerstate").innerHTML=this.castPlayerState+" - "+this.session.receiver.friendlyName)};n.prototype.updateMediaControlUI=function(){var n;this.deviceState==r.ACTIVE?(n=this.castPlayerState,document.getElementById("casticonactive").style.display="block",document.getElementById("casticonidle").style.display="none",n==t.PAUSED&&this.updateProgressBarByTimer()):(document.getElementById("casticonidle").style.display="block",document.getElementById("casticonactive").style.display="none",n=this.localPlayerState);switch(n){case t.LOADED:case t.PLAYING:document.getElementById("play").style.display="none";document.getElementById("pause").style.display="block";break;case t.PAUSED:case t.IDLE:case t.LOADING:case t.STOPPED:document.getElementById("pause").style.display="none";document.getElementById("play").style.display="block"}};n.prototype.selectMediaUpdateUI=function(){document.getElementById("progress").style.width="0px"};n.prototype.initializeUI=function(){this.actualizeStatus();this.mediaTitleUpdate();document.getElementById("casticonactive").addEventListener("click",this.stopApp.bind(this));document.getElementById("progress_bg").addEventListener("click",this.seekMedia.bind(this));document.getElementById("progress").addEventListener("click",this.seekMedia.bind(this));document.getElementById("progress_indicator").addEventListener("dragend",this.seekMedia.bind(this));document.getElementById("audio_on").addEventListener("click",this.muteMedia.bind(this));document.getElementById("audio_off").addEventListener("click",this.muteMedia.bind(this));document.getElementById("fullscreen_collapse").addEventListener("click",this.cancelFullScreen.bind(this));document.addEventListener("fullscreenchange",this.changeHandler.bind(this),!1);document.addEventListener("webkitfullscreenchange",this.changeHandler.bind(this),!1);document.getElementById("play").addEventListener("click",this.playMedia.bind(this));document.getElementById("stop").addEventListener("click",this.stopMedia.bind(this));document.getElementById("pause").addEventListener("click",this.pauseMedia.bind(this));document.getElementById("progress_indicator").draggable=!0;document.getElementById("activate").addEventListener("click",this.changeStatus.bind(this));document.getElementById("icone").addEventListener("click",this.addVideoThumbs.bind(this));window.addEventListener("resize",this.resize.bind(this));this.resize();document.getElementById("popup")!=null?(document.getElementById("fullscreen_expand").addEventListener("click",this.openTabPlayer.bind(this,"f")),document.getElementById("casticonidle").addEventListener("click",this.openTabPlayer.bind(this,"c"))):(document.getElementById("signature").addEventListener("click",this.openUrl.bind(this,"http://auriou.wordpress.com/")),document.getElementById("fullscreen_expand").addEventListener("click",this.requestFullScreen.bind(this)),document.getElementById("casticonidle").addEventListener("click",this.launchApp.bind(this)))};n.prototype.openTabPlayer=function(n){chrome.tabs.create({url:chrome.extension.getURL("index.html")+"?action="+n})};n.prototype.openUrl=function(n){chrome.tabs.create({url:n})};n.prototype.getQueryStringParams=function(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1]};n.prototype.showMediaControl=function(){document.getElementById("media_control").style.opacity=.7};n.prototype.hideMediaControl=function(){document.getElementById("media_control").style.opacity=0};n.prototype.showVolumeSlider=function(){document.getElementById("audio_bg").style.opacity=1;document.getElementById("audio_bg_track").style.opacity=1;document.getElementById("audio_bg_level").style.opacity=1;document.getElementById("audio_indicator").style.opacity=1};n.prototype.hideVolumeSlider=function(){document.getElementById("audio_bg").style.opacity=0;document.getElementById("audio_bg_track").style.opacity=0;document.getElementById("audio_bg_level").style.opacity=0;document.getElementById("audio_indicator").style.opacity=0};n.prototype.requestFullScreen=function(){var n=document.getElementById("video_element"),t=n.requestFullScreen||n.webkitRequestFullScreen;t&&t.call(n)};n.prototype.cancelFullScreen=function(){var n=document.cancelFullScreen||document.webkitCancelFullScreen;n&&n.call(document)};n.prototype.changeHandler=function(){this.fullscreen?(document.getElementById("fullscreen_expand").style.display="block",document.getElementById("fullscreen_collapse").style.display="none",this.fullscreen=!1):(document.getElementById("fullscreen_expand").style.display="none",document.getElementById("fullscreen_collapse").style.display="block",this.fullscreen=!0)};n.prototype.startProgressTimer=function(n){this.timer&&(clearInterval(this.timer),this.timer=null);this.timer=setInterval(n.bind(this),this.timerStep)};n.prototype.editTitle=function(n){var t=$("#id"+n+">.divLink")[0];t.contentEditable=!0;t.focus()};n.prototype.saveTitle=function(n){if(this.elemIsEdit(n)){var t=$("#id"+n+">.divLink")[0];t.contentEditable=!1;this.store.updateTitleVideo(n,t.innerText)}};n.prototype.keyTitle=function(n,t){var i,r;this.elemIsEdit(n)&&(t.keyCode==13?(i=$("#id"+n+">.divLink")[0],i.contentEditable=!1,this.store.updateTitleVideo(n,i.innerText)):t.keyCode==27&&(r=$("#id"+n+">.divLink")[0],r.contentEditable=!1,r.innerText=this.getVideo(n).title))};n.prototype.elemIsEdit=function(n){try{return $("#id"+n+">.divLink")[0].contentEditable=="true"}catch(t){return!1}};n.prototype.addVideoThumbs=function(){var s=document.getElementById("carousel"),n,t,u,i,r,f,e,o;for($("#carousel li").remove(),n=this.mediaContents.length-1;n>=0;n--)t=document.createElement("li"),t.setAttribute("id","id"+this.mediaContents[n].id),t.setAttribute("class","button tools"),u=document.createElement("div"),u.setAttribute("class","divType"),u.innerText="["+this.mediaContents[n].type+"]",u.addEventListener("click",this.selectMedia.bind(this,this.mediaContents[n].id)),t.appendChild(u),i=document.createElement("div"),i.setAttribute("class","divLink"),i.innerHTML="<i>"+this.mediaContents[n].title+"<\/i>",i.addEventListener("click",this.selectMedia.bind(this,this.mediaContents[n].id)),i.addEventListener("keydown",this.keyTitle.bind(this,this.mediaContents[n].id)),i.addEventListener("blur",this.saveTitle.bind(this,this.mediaContents[n].id)),t.appendChild(i),r=document.createElement("div"),this.mediaContents[n].origin==undefined?r.setAttribute("class","divEmpty"):(r.setAttribute("class","divWeb"),r.setAttribute("title","web"),r.addEventListener("click",this.openWeb.bind(this,this.mediaContents[n].id))),t.appendChild(r),f=document.createElement("div"),f.setAttribute("class","divVlc"),f.setAttribute("title","vlc"),f.addEventListener("click",this.openVlc.bind(this,this.mediaContents[n].id)),t.appendChild(f),e=document.createElement("div"),e.setAttribute("class","divEdit"),e.setAttribute("title","edit"),e.addEventListener("click",this.editTitle.bind(this,this.mediaContents[n].id)),t.appendChild(e),o=document.createElement("div"),o.setAttribute("class","divDelete"),o.setAttribute("title","delete"),o.addEventListener("click",this.deleteVideo.bind(this,this.mediaContents[n].id)),t.appendChild(o),s.appendChild(t)};n.prototype.openVlc=function(n){this.store.sendRequest(n,e,o)};n.prototype.openWeb=function(n){var i=this.getVideo(n),t;i!=null&&(t=i.origin,t!=undefined&&chrome.tabs.create({url:t}))};n.prototype.changeStatus=function(){this.store.invertCurrenctStatus();this.actualizeStatus()};n.prototype.actualizeStatus=function(){var n=document.getElementById("activate");this.store.status==!0?(n.innerHTML="&nbsp;ON&nbsp;",n.title="Disabled capture video"):(n.innerHTML="&nbsp;OFF&nbsp;",n.title="Enabled capture video");this.store.resetBadge()};n.prototype.deleteVideo=function(n){this.store.videos.delete(n);$("#id"+n).remove()};n.prototype.resize=function(){var n=document.getElementById("div_carousel");n.style.minHeight=document.body.clientHeight-n.offsetTop-18+"px"};window.CastPlayer=n})();$(document).ready(main);